/* ==========================================================================
   0) 토큰(색/간격/라운드)
   ========================================================================== */
:root{
  /* 다크톤 배경 + 로그인 페이지 톤과 맞춤 */
  --bg: #0b0f14;
  --fg: #eef2f7;
  --muted: #cbd5e1;

  /* 포인트/테두리 */
  --primary: #1F9461;              /* 초록 포인트 (CBM/콤보 공통) */
  --border: rgba(255,255,255,0.18);
  --surface: rgba(255,255,255,0.06);
  --surface-strong: rgba(255,255,255,0.12);
  --shadow-1: 0 1px 2px rgba(0,0,0,.12);
  --shadow-2: 0 10px 30px rgba(0,0,0,.35);

  /* 컴포넌트 공통 값 */
  --control-bg: #fff;              /* 입력/리스트 배경 */
  --control-fg: #333;              /* 입력/리스트 텍스트 */
  --control-border: #1F9461;       /* 입력/리스트 테두리 */
  --control-radius: .6rem;

  /* 간격/레이아웃 */
  --space-8: 0.5rem;
  --space-12: 0.75rem;
  --space-16: 1rem;
  --space-24: 1.5rem;
  --header-h: 3.5rem;
  --container-max: 90rem;
  --gutter: var(--space-24);
  --label-bottom-gap: 8px;
  --group-vertical-gap: 14px;

  /* 테이블 하이라이트 */
  --table-header: #D1FAE5;
  --table-text:   #14532D;
}

/* ==========================================================================
   1) 베이스 / 레이아웃
   ========================================================================== */
*{ box-sizing: border-box; }
html{ font-size: clamp(14px, 1.2vw, 16px); }
body{
  margin: 0;
  color: var(--fg);
  background: var(--bg);
  line-height: 1.5;
  font-family: "Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto, "Apple SD Gothic Neo", sans-serif;
}
.container{ max-width: var(--container-max); margin-inline: auto; padding-inline: var(--gutter); }
.section{ padding-block: clamp(2rem, 5vw, 4rem); }

/* 배경 이미지 레이어 */
.page-bg{
  position: fixed; inset: 0;
  background-image: url("https://arrrbang.github.io/pumex/image/costbackground.jpg");
  background-size: cover; background-position: center;
  filter: saturate(1) brightness(.9);
  z-index: -2;
}
.page-bg::after{
  content:""; position:absolute; inset:0;
  background: rgba(255,255,255,0.4); z-index:-1;
}

/* ==========================================================================
   2) 상단 바
   ========================================================================== */
.site-header{
  position: sticky; top: 0;
  background: rgba(0,0,0,0.7);
  border-bottom: 1px solid var(--border);
  z-index: 10;
}
.header-inner{
  display: grid; grid-template-columns: auto 1fr auto;
  align-items: center; column-gap: var(--space-16);
  min-height: var(--header-h);
  padding-block: calc((var(--header-h) - 2.8rem)/2);
}
.site-header .container{ max-width: none; width:100%; margin:0; padding-left:0; }
.brand{ display:inline-flex; align-items:center; justify-content:flex-start; }
.brand__logo{ height: calc(var(--header-h) * 0.65); width:auto; display:block; object-fit:contain; padding-left:1rem; margin-right:1rem; }
.header__title{
  justify-self: start; margin: 0; font-weight: 700; letter-spacing: .02em;
  color: #fff; text-decoration: none; font-size: clamp(1rem, 1.8vw, 1.25rem);
}
.header__title:hover{ text-decoration: underline; }
.header__nav{ justify-self:end; display:inline-flex; gap: var(--space-16); }

/* ==========================================================================
   3) 드롭다운 컨테이너의 선택 버튼 디자인 
   ========================================================================== */

.select-btn{
  border-radius: 2rem;
  padding: .35rem 1.1rem;         /* ← 더 낮은 높이 */
  min-width: 8.5rem;              /* ← 조회보다 조금 짧게 */
  border: 2px solid var(--primary);
  background: var(--primary);
  color:#fff; font-weight:700; font-size: .95rem;
  cursor:pointer; transition: background .2s ease, transform .08s ease;
}
.select-btn:hover{ background:#16724a; }
.select-btn:active{ transform: translateY(1px); }

/* ==========================================================================
   4) 드롭다운 패널(1단계/2단계) — 레이아웃 흔들림 최소화
   ========================================================================== */
.dropdown-container{ display:flex; justify-content:center; align-items:center; margin-top: 0; position:relative; }
.dropdown{
  text-align:center; overflow:hidden; max-height:0; opacity:0; transform: translateY(-10px);
  transition: max-height .45s ease, opacity .45s ease, transform .45s ease;
  display:flex; flex-direction:column; gap: 1rem; width: 28rem;
  background: rgba(255,255,255,0.75);
  border-radius: 1rem; box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  backdrop-filter: blur(8px);
  padding:0; margin:0; /* 패딩은 내부로 */
}
.dropdown.show{ opacity:1; transform: translateY(0); max-height: 1000px; }
.dropdown-inner{
  padding: 1rem 1.2rem;
  opacity: 0; transform: translateY(-6px);
  transition: opacity .35s ease, transform .35s ease; will-change: opacity, transform;
}
.dropdown.show .dropdown-inner{ opacity:1; transform: translateY(0); }

/* 라벨/요약 */
.dropdown-label, .dropdown-label-row .label-text{
  display: block;
  text-align: left;
  margin: 0 0 var(--label-bottom-gap);
  font-weight:600;
  color: #000;
  font-size: 1rem;
}
.dropdown-label-row{
  display:flex; justify-content:space-between; align-items:center;
  margin-bottom: .25rem;
}
/* 추가: 라벨이 연달아 나올 때 위쪽 여백 조금 주기 */
.dropdown-inner > .dropdown-label,
.dropdown-inner > .dropdown-label-row{
  margin-top: 6px;
}

.selection-summary{
  text-align:center; font-weight:700; color:#000; font-size: 1.4rem;
  margin-top: .5rem; margin-bottom: .8rem;
  opacity:0; transform: translateY(-10px);
  transition: all .4s ease;
  pointer-events: none;
}
.selection-summary.show{ opacity:1; transform: translateY(0); }

.selection-summary .summary-hot{
  pointer-events: auto;         /* ← 이 영역만 클릭 허용 */
  display: inline-block;
  padding: 2px 4px;
  border-radius: .25rem;
  cursor: pointer;
}
.selection-summary .summary-hot:focus-visible{
  outline: 3px solid rgba(35,155,103,.35);
  outline-offset: 2px;
  border-radius: .25rem;
}
/* 추가: 라벨 아래 컨트롤(콤보/셀렉트/인풋)과의 세로 간격 확보 */
.dropdown .combo,
.dropdown .dropdown-select,
.dropdown input[type="text"],
.dropdown input[type="number"]{
  margin-bottom: var(--group-vertical-gap);
}

/* 추가: “지역 선택” 라벨은 왼쪽 고정, 버튼은 오른쪽으로 밀기 */
.dropdown-label-row .label-text{ margin-right: auto; }


/* 지도 버튼 */
.map-button-inline{
  background: var(--primary); color:#fff; font-weight:600; font-size:.9rem;
  padding: .2rem .6rem; border:none; border-radius:.4rem; cursor:pointer;
  transition: background .25s ease, transform .1s ease; white-space:nowrap;
}
.map-button-inline:hover{ background:#16724a; }
.map-button-inline:active{ transform: scale(.97); }

/* ==========================================================================
   5) 폼 컨트롤 — CBM 드롭다운(select) + 텍스트 입력
   ========================================================================== */
.dropdown-select,
input[type="text"],
input[type="number"]{
  width:100%; padding: .6rem 1rem; font-size:1rem;
  border: 2px solid var(--control-border);
  border-radius: var(--control-radius);
  background: var(--control-bg);
  color: var(--control-fg);
  outline: none; transition: border-color .15s, box-shadow .15s;
  font-family: inherit;
}
.dropdown-select:focus,
input[type="text"]:focus,
input[type="number"]:focus{
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(20,83,45,.12);
}
input::placeholder{ color: var(--muted); opacity: 1; }

/* ==========================================================================
   6) 콤보박스 — 입력 + 리스트(포털 대응)
   ========================================================================== */
/* 컨테이너 */
.combo{ position:relative; width:100%; }

.compare-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
@media(max-width:900px){.compare-grid{grid-template-columns:1fr}}

/* 입력 — CBM 드롭다운과 동일한 외형 */
.combo input{
  width:100%; padding: .6rem 1rem; font-size:1rem;
  border: 2px solid var(--control-border);
  border-radius: var(--control-radius);
  background: var(--control-bg);
  color: var(--control-fg);
  outline:none; transition: border-color .15s, box-shadow .15s;
  font-family: inherit;
}
.combo input:focus{
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(20,83,45,.12);
}
.combo input::placeholder{ color: var(--muted); opacity: 1; }

/* 리스트(콤보 내부에 붙을 때) */
.combo .list{
  position:absolute; top: calc(100% + 6px); left:0; width:100%;
  max-height: 240px; overflow:auto;
  background: var(--control-bg);
  border: 2px solid var(--control-border);
  border-radius: var(--control-radius);
  box-shadow: 0 4px 12px rgba(0,0,0,.2);
  z-index: 1000; display:none;
}
.combo.open .list{ display:block; }

/* 리스트(포털로 body에 떠 있을 때) */
.list[data-__float="1"]{
  background: var(--control-bg);
  border: 2px solid var(--control-border);
  border-radius: var(--control-radius);
  box-shadow: 0 4px 12px rgba(0,0,0,.2);
  z-index: 1200;
  max-height: 240px; overflow:auto;
}

/* 항목 시인성 — CBM 드롭다운과 동일 톤 */
.combo .list .item,
.list[data-__float="1"] .item{
  padding: .55rem .8rem; cursor: pointer; line-height: 1.4;
  color: var(--control-fg); background: var(--control-bg); font-size:1rem;
}
.combo .list .item:hover,
.list[data-__float="1"] .item:hover{ background: rgba(31,148,97,.08); }
.combo .list .item.is-selected,
.list[data-__float="1"] .item.is-selected{
  background: var(--table-header); color: var(--table-text);
}

/* 포털 래퍼(스크립트용) */
.combo-float-wrap{ position:fixed; z-index: 1200; left:0; top:0; width:0; height:0; }

/* 스크롤바 톤 */
.combo .list::-webkit-scrollbar,
.list[data-__float="1"]::-webkit-scrollbar{ width: 8px; }
.combo .list::-webkit-scrollbar-thumb,
.list[data-__float="1"]::-webkit-scrollbar-thumb{ background: rgba(20,83,45,.35); border-radius: 8px; }

/* ==========================================================================
   7) 결과 리스트(요금 표기)
   ========================================================================== */
/* === 결과 표/버튼 최소 스타일 === */

.action-row{
  display:flex; justify-content:flex-end; margin: 12px 0 8px;
}

.action-row.center{
  display:flex;
  justify-content:center;
  align-items:center;
  margin: 2rem auto 1.5rem;
  opacity: 0;
  transform: translateY(22px);
  transition: opacity .45s ease, transform .45s ease;
  pointer-events: none;
}
.action-row.center.show {
  display: flex;
}
.action-row.center.revealed{
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}
.primary-btn{
  border-radius: 2rem;
  padding: .45rem 1.25rem;
  min-width: 10rem;
  border: 2px solid var(--primary);
  background: var(--primary);
  color:#fff; font-weight:700;
  cursor:pointer; transition: background .2s ease, transform .08s ease;
}
.primary-btn:hover{ background:#16724a; }
.primary-btn:active{ transform: translateY(1px); }

.table-wrap{ width:100%; overflow:auto; border-radius: inherit; }
.result-table{
  width:100%;
  border-collapse: separate;
  border-spacing: 0;
  margin-top: 8px;
  background: var(--control-bg);
  color: var(--control-fg);
  border: none;
  border-radius: var(--control-radius);
  overflow: hidden;
  table-layout: fixed;
}
.result-table th,
.result-table td{
  border: 1px solid #F5F5F5;
  padding: .6rem .75rem;
  text-align: left;
  vertical-align: top;
}

.result-table thead th{
  background: #153A47;
  color: #F5F5F5;
  font-weight: 700;
}

.result-table tbody td:first-child{
  background: #153A47;
  color: #F5F5F5;
  font-weight: 700;
  text-align: center;
}

.result-table thead th:first-child {
  text-align: center;
}

.result-table td.amt{
  white-space: nowrap;
  text-align: center;
  font-variant-numeric: tabular-nums;
}

.result-table thead th.type-col{ text-align: center; }

/*표 사이즈 수정*/
.result-table thead th:nth-child(1),
.result-table tbody td:nth-child(1){ width: 20%; }  /* 항목 */

.result-table thead th:nth-child(2),
.result-table tbody td:nth-child(2){ width: 18%; }  /* 컨테이너 타입 금액 */
.result-table thead th:nth-child(3),
.result-table tbody td:nth-child(3){ width: auto; }  /* 비고 */


 /* 지역 필터가 적용된 조회의 경우(단일 지역): 2열이 컨테이너 타입, 3열이 비고 */
 /* 이 경우를 별도 대응하려면 렌더 시 테이블에 is-region-filtered 같은 클래스를 달아 조건부로 재정의하면 됩니다. */


.result-section{ display:none; padding: 0 1rem 2rem; }
.result-section.show{ display:block; }

.result-container{
  max-width: 64rem;
  margin: 0 auto;
  background: rgba(255,255,255,0.82);
  backdrop-filter: blur(6px);
  border-radius: 1rem;
  box-shadow: 0 10px 24px rgba(0,0,0,.22);
  border: 1px solid var(--border);
  padding: 1rem 1.25rem;
  overflow: hidden;
}

/* ==========================================================================
   8) 접근성
   ========================================================================== */
:focus-visible{
  outline: 3px solid rgba(35,155,103,.35);
  outline-offset: 2px; border-radius: .5rem;
}
